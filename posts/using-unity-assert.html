<!DOCTYPE html>
<html lang="en">
<head>
          <title>Ha.Minh's Blog</title>
        <meta charset="utf-8" />
        <link href="http://minhhh.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ha.Minh's Blog Full Atom Feed" />
        <link href="http://minhhh.github.io/feeds/unity.atom.xml" type="application/atom+xml" rel="alternate" title="Ha.Minh's Blog Categories Atom Feed" />



    <meta name="tags" contents="unity" />
    <meta name="tags" contents="assert" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://minhhh.github.io/">Ha.Minh's Blog <strong>Software development and other stuff</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="http://minhhh.github.io/pages/about">About</a></li>
            <li><a href="http://minhhh.github.io/pages/projects">Projects</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://minhhh.github.io/posts/using-unity-assert" rel="bookmark"
         title="Permalink to Using Unity Assert">Using Unity Assert</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2017-04-25T00:00:00">
      Tue 25 April 2017
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="http://minhhh.github.io/author/haminh.html">Ha.Minh</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Even though Unity's <a href="http://blog.theknightsofunity.com/unity-5-1-assertion-library/">UnityEngine.Assertions</a> is great, it has two major disadvantages</p>
<ul>
<li>We cannot extend it</li>
<li>It does not have the concept of error code. Using error code, we can force developers to explicitly think about how they will categorize the error so it's easier to analyze the error when the game crashes</li>
</ul>
<p>Therefore I put together a simple script to do assertion here: <a href="https://github.com/minhhh/UBootstrap.Assert">https://github.com/minhhh/UBootstrap.Assert</a></p>
<p>Our <code>CUSTOM_ASSERT</code> class provides the almost the same interface as <code>UnityEngine.Assertions.Assert</code>:</p>
<ul>
<li><code>IsTrue (bool condition, int errorCode, string message = "", params object[] args)</code> - Asserts that the condition is true.</li>
<li><code>IsFalse (bool condition, int errorCode, string message = "", params object[] args)</code> - Assert that condition is false</li>
<li><code>IsNull (object value, int errorCode, string message = "", params object[] args)</code> - Assert that value is null.</li>
<li><code>IsNotNull (object value, int errorCode, string message = "", params object[] args)</code> - Assert that value is not null.</li>
<li><code>AreEqual&lt;T&gt; (T expected, T actual, int errorCode, string message = "", params object[] args)</code> - Assert that the values are equal.</li>
<li><code>AreNotEqual&lt;T&gt; (T expected, T actual, int errorCode, string message = "", params object[] args)</code> - Assert that the values are not equal.</li>
<li><code>AreApproximatelyEqual (float expected, float actual, int errorCode, float tolerance, string message = "", params object[] args)</code> - Asserts that the values are approximately equal. An absolute error check is used for approximate equality check (|a-b| &lt; tolerance). Default tolerance is 0.00001f.</li>
<li><code>AreNotApproximatelyEqual (float expected, float actual, int errorCode, float tolerance, string message = "", params object[] args)</code> - Asserts that the values are approximately not equal. An absolute error check is used for approximate equality check (|a-b| &lt; tolerance). Default tolerance is 0.00001f.</li>
<li><code>Fail (int errorCode, string message = "", params object[] args)</code> - Just fail the assertion.</li>
</ul>
<p>The reason it's named <code>CUSTOM_ASSERT</code> is to make it look like a macro definition. In fact, you have to define a macro named <code>CUSTOM_ASSERT</code> to include it in your build, similarly to the macro <code>UNITY_ASSERTIONS</code> from Unity.</p>
<p><code>CUSTOM_ASSERT</code> class is defined as a partial class. It is expected that you define your part of the partial class, so that you can provide some default error code for common functions. You can find an example in <code>Assets/MY_ASSERT.cs</code>. It is also recommended that you define your own sets of error codes.</p>
<p>There is no way to include the assertion without throwing exception, because it does not make sense to assert something that does not crash the build if its not true. Those set of errors belong to a logger, not an assert utility.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>