<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Ha.Minh" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Python decorator tutorial - Ha.Minh's Blog</title>

   
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />


      <link rel="stylesheet" href="http://minhhh.github.io/theme/css/pygment.css" />
      <link rel="stylesheet" href="http://minhhh.github.io/theme/css/voidybootstrap.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="http://minhhh.github.io/favicon.ico" />
        <link href="http://minhhh.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ha.Minh's Blog Atom Feed" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50796592-2', '');
  ga('send', 'pageview');

</script>
  </head>

  <body>
   
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle" 
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="http://minhhh.github.io/" rel="home">
          <i class="fa fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
              <li>
                <a href="http://minhhh.github.io/pages/about">About</a>
              </li>
              <li>
                <a href="http://minhhh.github.io/pages/projects">Projects</a>
              </li>
            <li class="divider"></li>
            <li class="">
              <a href="http://minhhh.github.io/archives.html">Archives</a>
            </li>
          <li class="divider"></li>
            <li><a href="http://minhhh.github.io/feeds/all.atom.xml" 
                   type="application/atom+xml" rel="alternate">
                <i class="fa fa-rss fa-fw fa-lg"></i> </a></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="http://minhhh.github.io/">Ha.Minh's Blog</a></h1>
		<p class="lead">Software development and other stuff</p>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Sun 05 October 2014
</abbr> <h1>
  <a href="http://minhhh.github.io/posts/python-decorator-tutorial" rel="bookmark"
     title="Permalink to Python decorator tutorial">
    Python decorator tutorial
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="http://minhhh.github.io/author/haminh.html">Ha.Minh</a>
    in 
    <a href="http://minhhh.github.io/category/programming.html">
      Programming</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<p><div>
    <style type = "text/css" scoped>
.git-content div {
    padding: 0;
    margin: 0;
}

.git-content .git-file {
    border: 1px solid #DEDEDE;
    margin-bottom: 1em;
}

.git-content .git-file .git-meta {
    background-color: #EAEAEA;
    color: #666666;
    font-size: 85%;
    overflow: hidden;
    padding: 0.5em;
}

.git-content .git-file .git-meta a {
    color: #336699;
}

.git-content .git-file .git-meta a:visited {
    color: #773377;
}

.git-content .git-file {
    background-color: #F8F8FF;
    border-bottom: 1px solid #DDDDDD;
    font-size: 100%;
    overflow: auto;
    word-wrap: normal;
}

.git-content .git-file pre {
    background: none repeat scroll 0 0 transparent !important;
    border: medium none !important;
    margin: 0 !important;
    padding: 0 !important;
}
    </style>
    <div class="git-content">
        <div class="git-file">
            <div class="file">
 <div class="readme blob instapaper_body" id="readme">
  <article class="markdown-body entry-content" itemprop="text">
   <h1>
    <a aria-hidden="true" class="anchor" href="#python-decorator-tutorial" id="user-content-python-decorator-tutorial">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    PYTHON DECORATOR TUTORIAL
   </h1>
   <p>
    Decorators are a powerful tool for getting rid of code duplication, aka following DRY principle. It also helps with standardization of code in a project without forcing developers to remember predefined snippets or patters. In this tutorial, we'll discover how to create and use them.
   </p>
   <p>
    Another important point to note is I'm aiming for practical value of the decorators so there will be no
    <code>
     foo
    </code>
    ,
    <code>
     bar
    </code>
    examples, all examples must solve real world problem and/or taken from good source.
   </p>
   <h2>
    <a aria-hidden="true" class="anchor" href="#first-level" id="user-content-first-level">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    First level
   </h2>
   <p>
    We all know memoization and probably implement it as a function that takes an arbitrary function and return a memoized function:
   </p>
   <div class="highlight highlight-source-python">
    <pre>    memoized_factorial <span class="pl-k">=</span> construct_memoize(factorial)</pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    This is extremely cumbersome if
    <code>
     factorial
    </code>
    is a method of some class because then we have to use temporary variable to store the memoized function and somehow reassign it to the method. We want some way to elegantly do all the manual things to make a memoized version of a function, this is where
    <code>
     decorator
    </code>
    comes in.
   </p>
   <p>
    In its simplest form, a decorator is a function that takes the original function and returns a
    <code>
     decorated function
    </code>
   </p>
   <div class="highlight highlight-source-python">
    <pre>    cache_obj <span class="pl-k">=</span> {}

    <span class="pl-k">def</span> <span class="pl-en">cache</span>(<span class="pl-smi">func</span>):
        <span class="pl-k">def</span> <span class="pl-en">inner</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
            <span class="pl-k">global</span> cache_obj
            key <span class="pl-k">=</span> <span class="pl-c1">str</span>(args) <span class="pl-k">+</span> <span class="pl-c1">str</span>(kwargs)
            <span class="pl-k">if</span> key <span class="pl-k">not</span> <span class="pl-k">in</span> cache_obj:
                cache_obj[key] <span class="pl-k">=</span> func(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
            <span class="pl-k">else</span>:
                <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>Get from cache <span class="pl-c1">{}</span><span class="pl-pds">"</span></span>.format(key)
            <span class="pl-k">return</span> cache_obj[key]
        <span class="pl-k">return</span> inner

    <span class="pl-en">@cache</span>
    <span class="pl-k">def</span> <span class="pl-c1">sum</span>(<span class="pl-smi">a</span>, <span class="pl-smi">b</span>):
        <span class="pl-s"><span class="pl-pds">"""</span>Sum 2 numbers</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span>
        <span class="pl-k">return</span> a <span class="pl-k">+</span> b</pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    The
    <code>
     @
    </code>
    is a special syntax that applies the decorator function to the underneath function or class. Here,
    <code>
     cache(func)
    </code>
    is called, passing original
    <code>
     func
    </code>
    to the decorator, then replace
    <code>
     func
    </code>
    with whatever function is returned from
    <code>
     cache(func)
    </code>
    .
   </p>
   <p>
    Using global cache object
    <code>
     cache_obj
    </code>
    is not a great idea, because different functions can have the same arguments, then your cache is overwritten. It's better to assign the cache object directly to the original function
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-k">def</span> <span class="pl-en">memoize_2</span>(<span class="pl-smi">func</span>):
        <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">hasattr</span>(func, <span class="pl-s"><span class="pl-pds">'</span>cache<span class="pl-pds">'</span></span>):
            func.cache <span class="pl-k">=</span> {}
        <span class="pl-k">def</span> <span class="pl-en">inner</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
            key <span class="pl-k">=</span> <span class="pl-c1">str</span>(args) <span class="pl-k">+</span> <span class="pl-c1">str</span>(kwargs)
            <span class="pl-k">if</span> key <span class="pl-k">not</span> <span class="pl-k">in</span> func.cache:
                func.cache[key] <span class="pl-k">=</span> func(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
            <span class="pl-k">else</span>:
                <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>Get from cache <span class="pl-c1">{}</span><span class="pl-pds">"</span></span>.format(key)
            <span class="pl-k">return</span> func.cache[key]
        <span class="pl-k">return</span> inner

    <span class="pl-en">@memoize_2</span>
    <span class="pl-k">def</span> <span class="pl-en">multiply</span>(<span class="pl-smi">a</span>, <span class="pl-smi">b</span>):
        <span class="pl-s"><span class="pl-pds">"""</span>Multiply 2 numbers</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span>
        <span class="pl-k">return</span> a <span class="pl-k">*</span> b

    multiply(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>)
    multiply(<span class="pl-c1">1</span>,<span class="pl-c1">2</span>)</pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    This decorator is nice, but in practice nobody does this, and it's too bad that a lot of tutorials keep giving these non-working examples. The reason is the new decorated function lose all its original information such as name, docstring, module name and so on.
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-c1">print</span> multiply.<span class="pl-c1">__doc__</span> <span class="pl-c"># None</span></pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    To keep these information, we use
    <code>
     functools.wrapper
    </code>
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-k">import</span> functools
    <span class="pl-k">def</span> <span class="pl-en">memoize</span>(<span class="pl-smi">func</span>):
        <span class="pl-en">@functools.wraps</span>(func)
        <span class="pl-k">def</span> <span class="pl-en">inner</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
            key <span class="pl-k">=</span> <span class="pl-c1">str</span>(args) <span class="pl-k">+</span> <span class="pl-c1">str</span>(kwargs)
            <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">hasattr</span>(func, <span class="pl-s"><span class="pl-pds">'</span>cache<span class="pl-pds">'</span></span>):
                func.cache <span class="pl-k">=</span> {}
            <span class="pl-k">if</span> key <span class="pl-k">not</span> <span class="pl-k">in</span> func.cache:
                func.cache[key] <span class="pl-k">=</span> func(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
            <span class="pl-k">else</span>:
                <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>Get from cache <span class="pl-c1">{}</span><span class="pl-pds">"</span></span>.format(key)
            <span class="pl-k">return</span> func.cache[key]
        <span class="pl-k">return</span> inner

    <span class="pl-c1">print</span> multiply.<span class="pl-c1">__doc__</span> <span class="pl-c"># Multiply 2 numbers</span></pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    Now the decorated function also retain important information from the original functions, that's neat!
   </p>
   <h2>
    <a aria-hidden="true" class="anchor" href="#higher-level" id="user-content-higher-level">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    Higher level
   </h2>
   <p>
    The
    <code>
     memoize
    </code>
    decorator doesn't need any customization, but there are a lot of pattern that requires some kind of customization. For instance, we want to apply a retry pattern to a function that follows special protocol. Obviously, we have to specify the number of retries, the delay between retry, and maybe a backoff factor to scale up the delay between failed attempts. This is how we do it:
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-k">import</span> time, math

    <span class="pl-k">def</span> <span class="pl-en">retry</span>(<span class="pl-smi">tries</span>, <span class="pl-smi">delay</span><span class="pl-k">=</span><span class="pl-c1">3</span>, <span class="pl-smi">backoff</span><span class="pl-k">=</span><span class="pl-c1">2</span>):
        <span class="pl-s"><span class="pl-pds">'''</span>Retries a function or method until it returns True.</span>
<span class="pl-s">        delay sets the initial delay in seconds, and backoff sets the factor by which</span>
<span class="pl-s">        the delay should lengthen after each failure. backoff must be greater than 1,</span>
<span class="pl-s">        or else it isn't really a backoff. tries must be at least 0, and delay</span>
<span class="pl-s">        greater than 0.<span class="pl-pds">'''</span></span>

        <span class="pl-k">if</span> backoff <span class="pl-k">&lt;=</span> <span class="pl-c1">1</span>:
            <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span>(<span class="pl-s"><span class="pl-pds">"</span>backoff must be greater than 1<span class="pl-pds">"</span></span>)

        <span class="pl-k">if</span> tries <span class="pl-k">&lt;</span> <span class="pl-c1">0</span>:
            <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span>(<span class="pl-s"><span class="pl-pds">"</span>tries must be 0 or greater<span class="pl-pds">"</span></span>)

        <span class="pl-k">if</span> delay <span class="pl-k">&lt;=</span> <span class="pl-c1">0</span>:
            <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span>(<span class="pl-s"><span class="pl-pds">"</span>delay must be greater than 0<span class="pl-pds">"</span></span>)

        <span class="pl-k">def</span> <span class="pl-en">deco_retry</span>(<span class="pl-smi">f</span>):
            <span class="pl-k">def</span> <span class="pl-en">f_retry</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
                mtries, mdelay <span class="pl-k">=</span> tries, delay

                rv <span class="pl-k">=</span> f(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
                <span class="pl-k">while</span> mtries <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>:
                    <span class="pl-k">if</span> rv <span class="pl-k">is</span> <span class="pl-c1">True</span>:
                        <span class="pl-k">return</span> <span class="pl-c1">True</span>

                    mtries <span class="pl-k">-=</span> <span class="pl-c1">1</span>
                    time.sleep(mdelay)
                    mdelay <span class="pl-k">*=</span> backoff

                    rv <span class="pl-k">=</span> f(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)

                <span class="pl-k">return</span> <span class="pl-c1">False</span>
            <span class="pl-k">return</span> f_retry
        <span class="pl-k">return</span> deco_retry

    <span class="pl-en">@retry</span>(<span class="pl-c1">1</span>, <span class="pl-v">delay</span><span class="pl-k">=</span><span class="pl-c1">1</span>, <span class="pl-v">backoff</span><span class="pl-k">=</span><span class="pl-c1">2</span>)
    <span class="pl-k">def</span> <span class="pl-en">get_data</span>():
        <span class="pl-k">return</span> <span class="pl-c1">False</span></pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    Here, we define
    <code>
     retry
    </code>
    as a function that returns a
    <code>
     decorator
    </code>
    which will do the actual decoration of our original function with the parameters provided by
    <code>
     retry
    </code>
    . We consider that
    <code>
     retry(1, delay=1, backoff=2)
    </code>
    is called first, returning a function, then the decorator syntax
    <code>
     @
    </code>
    is applied. This is just an addition of another layer on the decoration stack. In theory, you can have unlimited number of nested layer, but in practice, most of the time you only use 2.
   </p>
   <h2>
    <a aria-hidden="true" class="anchor" href="#decorator-class" id="user-content-decorator-class">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    Decorator class
   </h2>
   <p>
    Using function as decorators is straight forward, and for storing persistent information we use closures over temporary variables. It'd be nice if the persistent information are class members.
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-k">import</span> collections
    <span class="pl-k">class</span> <span class="pl-en">memoized</span>(<span class="pl-c1">object</span>):
        <span class="pl-s"><span class="pl-pds">'''</span>Decorator. Caches a function's return value each time it is called.</span>
<span class="pl-s">        If called later with the same arguments, the cached value is returned</span>
<span class="pl-s">        (not reevaluated).</span>
<span class="pl-s">        <span class="pl-pds">'''</span></span>
        <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">func</span>):
            <span class="pl-v">self</span>.func <span class="pl-k">=</span> func
            <span class="pl-v">self</span>.<span class="pl-c1">__doc__</span> <span class="pl-k">=</span> func.<span class="pl-c1">__doc__</span>
            <span class="pl-v">self</span>.cache <span class="pl-k">=</span> {}
        <span class="pl-k">def</span> <span class="pl-c1">__call__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
            <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">isinstance</span>(args, collections.Hashable):
                <span class="pl-c"># uncacheable. a list, for instance.</span>
                <span class="pl-c"># better to not cache than blow up.</span>
                <span class="pl-k">return</span> <span class="pl-v">self</span>.func(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
            <span class="pl-k">if</span> args <span class="pl-k">in</span> <span class="pl-v">self</span>.cache:
                <span class="pl-k">return</span> <span class="pl-v">self</span>.cache[args]
            <span class="pl-k">else</span>:
                value <span class="pl-k">=</span> <span class="pl-v">self</span>.func(<span class="pl-k">*</span>args, <span class="pl-k">**</span>kwargs)
                <span class="pl-v">self</span>.cache[args] <span class="pl-k">=</span> value
                <span class="pl-k">return</span> value
        <span class="pl-k">def</span> <span class="pl-c1">__repr__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
            <span class="pl-s"><span class="pl-pds">'''</span>Return the function's docstring.<span class="pl-pds">'''</span></span>
            <span class="pl-k">return</span> <span class="pl-v">self</span>.func.<span class="pl-c1">__doc__</span>
        <span class="pl-k">def</span> <span class="pl-c1">__get__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">obj</span>, <span class="pl-smi">objtype</span>):
            <span class="pl-s"><span class="pl-pds">'''</span>Support instance methods.<span class="pl-pds">'''</span></span>
            <span class="pl-k">return</span> functools.partial(<span class="pl-v">self</span>.<span class="pl-c1">__call__</span>, obj)</pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    Here, the decorator is an object of class
    <code>
     memoized
    </code>
    and you can store all sort of information like you would a normal object.
   </p>
   <h2>
    <a aria-hidden="true" class="anchor" href="#class-decorator" id="user-content-class-decorator">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    Class decorator
   </h2>
   <p>
    Up to now we're working with function decorator, what if we want to operate at class level? It's actually quite simple, we only have to define a function that takes a class instead of a function as the parameter.
   </p>
   <p>
    Let's have a look at
    <a href="https://hg.python.org/cpython/file/8e838598eed1/Lib/functools.py">
     functool.total_ordering
    </a>
    . This decorator makes it so that you only have to define one of the four functions
    <code>
     __lt__
    </code>
    ,
    <code>
     __le__
    </code>
    ,
    <code>
     __gt__
    </code>
    ,
    <code>
     __ge__
    </code>
    , and the other three will be defined based on the provided function.
   </p>
   <div class="highlight highlight-source-python">
    <pre>    <span class="pl-k">def</span> <span class="pl-en">total_ordering</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):
        <span class="pl-s"><span class="pl-pds">"""</span>Class decorator that fills in missing ordering methods<span class="pl-pds">"""</span></span>
        convert <span class="pl-k">=</span> {
            <span class="pl-s"><span class="pl-pds">'</span>__lt__<span class="pl-pds">'</span></span>: [(<span class="pl-s"><span class="pl-pds">'</span>__gt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> (<span class="pl-v">self</span> <span class="pl-k">&lt;</span> other <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other)),
                    (<span class="pl-s"><span class="pl-pds">'</span>__le__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-v">self</span> <span class="pl-k">&lt;</span> other <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__ge__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&lt;</span> other)],
            <span class="pl-s"><span class="pl-pds">'</span>__le__<span class="pl-pds">'</span></span>: [(<span class="pl-s"><span class="pl-pds">'</span>__ge__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&lt;=</span> other <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__lt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-v">self</span> <span class="pl-k">&lt;=</span> other <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__gt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&lt;=</span> other)],
            <span class="pl-s"><span class="pl-pds">'</span>__gt__<span class="pl-pds">'</span></span>: [(<span class="pl-s"><span class="pl-pds">'</span>__lt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> (<span class="pl-v">self</span> <span class="pl-k">&gt;</span> other <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other)),
                    (<span class="pl-s"><span class="pl-pds">'</span>__ge__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-v">self</span> <span class="pl-k">&gt;</span> other <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__le__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&gt;</span> other)],
            <span class="pl-s"><span class="pl-pds">'</span>__ge__<span class="pl-pds">'</span></span>: [(<span class="pl-s"><span class="pl-pds">'</span>__le__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: (<span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&gt;=</span> other) <span class="pl-k">or</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__gt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-v">self</span> <span class="pl-k">&gt;=</span> other <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">==</span> other),
                    (<span class="pl-s"><span class="pl-pds">'</span>__lt__<span class="pl-pds">'</span></span>, <span class="pl-k">lambda</span> <span class="pl-smi">self</span>, <span class="pl-smi">other</span>: <span class="pl-k">not</span> <span class="pl-v">self</span> <span class="pl-k">&gt;=</span> other)]
        }
        <span class="pl-c"># Find user-defined comparisons (not those inherited from object).</span>
        roots <span class="pl-k">=</span> [op <span class="pl-k">for</span> op <span class="pl-k">in</span> convert <span class="pl-k">if</span> <span class="pl-c1">getattr</span>(<span class="pl-v">cls</span>, op, <span class="pl-c1">None</span>) <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">getattr</span>(<span class="pl-c1">object</span>, op, <span class="pl-c1">None</span>)]
        <span class="pl-k">if</span> <span class="pl-k">not</span> roots:
            <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span>(<span class="pl-s"><span class="pl-pds">'</span>must define at least one ordering operation: &lt; &gt; &lt;= &gt;=<span class="pl-pds">'</span></span>)
        root <span class="pl-k">=</span> <span class="pl-c1">max</span>(roots)       <span class="pl-c"># prefer __lt__ to __le__ to __gt__ to __ge__</span>
        <span class="pl-k">for</span> opname, opfunc <span class="pl-k">in</span> convert[root]:
            <span class="pl-k">if</span> opname <span class="pl-k">not</span> <span class="pl-k">in</span> roots:
                opfunc.<span class="pl-c1">__name__</span> <span class="pl-k">=</span> opname
                opfunc.<span class="pl-c1">__doc__</span> <span class="pl-k">=</span> <span class="pl-c1">getattr</span>(<span class="pl-c1">int</span>, opname).<span class="pl-c1">__doc__</span>
                <span class="pl-c1">setattr</span>(<span class="pl-v">cls</span>, opname, opfunc)
        <span class="pl-k">return</span> <span class="pl-v">cls</span></pre>
   </div>
   <p>
    <br/>
   </p>
   <p>
    This code is pretty simple. It defines 3 other operators based on 2 operators:
    <code>
     __eq__
    </code>
    and one of the four functions
    <code>
     __lt__
    </code>
    ,
    <code>
     __le__
    </code>
    ,
    <code>
     __gt__
    </code>
    ,
    <code>
     __ge__
    </code>
    .
   </p>
   <h2>
    <a aria-hidden="true" class="anchor" href="#useful-decorators" id="user-content-useful-decorators">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    Useful decorators
   </h2>
   <ul>
    <li>
     property - used to quickly create a field from appropriate getter, setter and deleter.
    </li>
   </ul>
   <h1>
    <a aria-hidden="true" class="anchor" href="#references" id="user-content-references">
     <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
      </path>
     </svg>
    </a>
    REFERENCES
   </h1>
   <ul>
    <li>
     <a href="https://wiki.python.org/moin/PythonDecoratorLibrary" title="Python Decorator Library">
      Python Decorator Library
     </a>
    </li>
   </ul>
  </article>
 </div>
</div>

            <div class="git-meta">
                
                <span>Brought to you by me <a href="https://github.com/minhhh/pelican_git">pelican_git</a>.</span>
                
                <span style="float: right; color: #369;"><a href="https://github.com/minhhh/wiki/blob/master/py_decorators.md">view original</a></span>
                <span style="float: right; margin-right: 8px;">
                    <a style="color: rgb(102, 102, 102);" href="https://github.com/minhhh/wiki/blob/master/py_decorators.md">py_decorators.md</a></span>
            </div>
        </div>
    </div>
</div></p>
  </div>
  
<div class="article-tag-list">
<span class="label label-default">Tags</span>
	<a href="http://minhhh.github.io/tag/python.html"><i class="fa fa-tag"></i>python</a>&nbsp;
	<a href="http://minhhh.github.io/tag/decorator.html"><i class="fa fa-tag"></i>decorator</a>&nbsp;
</div>  <hr />
  <div class="well well-sm">  <!-- Social media sharing buttons -->

    <!-- Google+ -->
    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <div class="g-plusone" data-size="medium"></div>&nbsp;

    <!-- Facebook -->
    <div class="fb-like" 
        data-href="http://minhhh.github.io/posts/python-decorator-tutorial" 
        data-layout="button_count" 
        data-action="like" data-show-faces="true" 
        data-share="true">
    </div>
    &nbsp;
  </div> <!-- /Social media sharing buttons -->
  <div class="comments">
	<h2>Comments</h2>
	<div id="disqus_thread"></div>
	<script type="text/javascript">
				   (function() {
						var dsq = document.createElement('script');
						dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//minhhh.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] ||
						 document.getElementsByTagName('body')[0]).appendChild(dsq);
				  })();
	</script>
  </div>
</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="https://plus.google.com/u/0/104727235342101204530/about/p/pub" target="_blank">
	  <i class="fa fa-google-plus-square fa-fw fa-lg" title="Google+"></i>
		Google+
	</a></li>
    <li><a href="https://twitter.com/utsace" target="_blank">
	  <i class="fa fa-twitter-square fa-fw fa-lg" title="Twitter"></i>
		Twitter
	</a></li>
    <li><a href="https://www.facebook.com/minh.ha.hanoi" target="_blank">
	  <i class="fa fa-facebook-square fa-fw fa-lg" title="Facebook"></i>
		Facebook
	</a></li>
    <li><a href="https://github.com/minhhh" target="_blank">
	  <i class="fa fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="http://minhhh.github.io/category/android.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Android</a></li>
  <li><a href="http://minhhh.github.io/category/blog.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Blog</a></li>
  <li><a href="http://minhhh.github.io/category/deconstructed.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Deconstructed</a></li>
  <li><a href="http://minhhh.github.io/category/programming.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Programming</a></li>
  <li><a href="http://minhhh.github.io/category/technology.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Technology</a></li>
  <li><a href="http://minhhh.github.io/category/unity.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Unity</a></li>
  <li><a href="http://minhhh.github.io/category/web-development.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Web Development</a></li>
</ul>
</div>

</div> <!-- /row -->

<h4><i class="fa fa-link fa-fw fa-lg"></i> Links</h4>
<ul class="list-unstyled category-links">
  <li><a href=http://getpelican.com/ >
    <i class="fa fa-fw fa-external-link-square fa-lg"></i> Pelican</a></li>
  <li><a href=http://python.org/ >
    <i class="fa fa-fw fa-external-link-square fa-lg"></i> Python.org</a></li>
</ul>

<h4><i class="fa fa-tags fa-fw fa-lg"></i> Tags</h4>
<p class="tag-cloud">
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/adb.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>adb
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/decorator.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>decorator
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/otp.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>otp
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/network.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>network
    </a>
</span>
<span class="tag-2">
    <a href="http://minhhh.github.io/tag/git.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>git
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/blog.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>blog
    </a>
</span>
<span class="tag-2">
    <a href="http://minhhh.github.io/tag/github.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>github
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/memcache.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>memcache
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/deconstructed.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>deconstructed
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/shell.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>shell
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/rebase.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>rebase
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/c.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>c#
    </a>
</span>
<span class="tag-1">
    <a href="http://minhhh.github.io/tag/clippings.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>clippings
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/netcat.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>netcat
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/pelican.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>pelican
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/mac.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>mac
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/magic-method.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>magic method
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/android.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>android
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/cli.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>cli
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/unity.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>unity
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/medium.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>medium
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/awk.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>awk
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/osx.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>osx
    </a>
</span>
<span class="tag-3">
    <a href="http://minhhh.github.io/tag/bash.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>bash
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/socialnetwork.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>socialnetwork
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/singleton.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>singleton
    </a>
</span>
<span class="tag-2">
    <a href="http://minhhh.github.io/tag/python.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>python
    </a>
</span>
<span class="tag-4">
    <a href="http://minhhh.github.io/tag/checklist.html">
        <i class="fa fa-tag fa-fw fa-lg"></i>checklist
    </a>
</span>
</p>

<h4><i class="fa fa-rss fa-fw fa-lg"></i> Feeds</h4>
<ul class="list-unstyled">
    <li><a href="http://minhhh.github.io/feeds/all.atom.xml" 
		   type="application/atom+xml" rel="alternate">
		<i class="fa fa-rss-square fa-fw fa-lg"></i> Atom Feed</a></li>
</ul>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
 
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by 
        <a href="http://www.robertiwancz.com/"
           target="_blank">RKI</a>  
        </p>
      </address><!-- /colophon  -->
    </footer>

<!-- DISQUS script for displaying comment count -->
<script type="text/javascript">
    var disqus_shortname = 'minhhh';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- javascript -->
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google+ -->
<!-- Synchronous 
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
-->
<!-- Asynchronous -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>  </body>
</html>